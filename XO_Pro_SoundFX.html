<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>XO Pro SoundFX - Designed by Alaa</title>
<style>
html, body { margin:0; padding:0; height:100%; font-family: Arial; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#f9f9f9; transition: background-color 0.3s; }
body { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><text x="0" y="20" font-size="20" opacity="0.03">ğŸ†ğŸ‰ğŸ’ªâœ¨</text></svg>'); background-repeat:repeat; background-size:50px; }
#gameContainer { display:flex; flex-direction:column; align-items:center; width:100%; height:100%; justify-content:center; }
#controls { display:flex; justify-content:center; gap:20px; margin:10px; flex-wrap:wrap; }
select, input[type=color] { padding:5px 10px; font-size:16px; }
.board { display:grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); gap:5px; width:95vmin; height:95vmin; }
.cell { display:flex; justify-content:center; align-items:center; font-size:12vmin; cursor:pointer; border-radius:10px; user-select:none; transition: background 0.3s, transform 0.2s; background:#fff; border:2px solid #333; }
.cell.X { background: #4caf50; color:#fff; }
.cell.O { background: #f44336; color:#fff; }
.cell.win { transform: scale(1.2); box-shadow: 0 0 20px gold; }
#score { font-size:24px; margin:10px; }
</style>
</head>
<body>
<div id="gameContainer">
<h1>XO Pro SoundFX ğŸ®</h1>
<div id="controls">
<label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰: </label>
<select id="levelSelect">
<option value="easy">Ø³Ù‡Ù„</option>
<option value="medium">ÙˆØ³Ø·</option>
<option value="hard">ØµØ¹Ø¨</option>
</select>
<label>Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©: </label>
<input type="color" id="bgColorPicker" value="#f9f9f9">
</div>
<div id="score">Ø°Ù‡Ø¨: 0</div>
<div class="board" id="board">
<div class="cell" data-index="0"></div>
<div class="cell" data-index="1"></div>
<div class="cell" data-index="2"></div>
<div class="cell" data-index="3"></div>
<div class="cell" data-index="4"></div>
<div class="cell" data-index="5"></div>
<div class="cell" data-index="6"></div>
<div class="cell" data-index="7"></div>
<div class="cell" data-index="8"></div>
</div>
<p>Designed by Alaa</p>
</div>

<!-- Ø§Ù„Ø£ØµÙˆØ§Øª -->
<audio id="clickSound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>
<audio id="winSound" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>
<audio id="loseSound" src="https://www.soundjay.com/human/sounds/cry-1.mp3"></audio>
<audio id="drawSound" src="https://www.soundjay.com/human/sounds/oh-no-2.mp3"></audio>
<audio id="startSound" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>
<audio id="newGameSound" src="https://www.soundjay.com/button/sounds/button-09.mp3"></audio>

<script>
const cells = document.querySelectorAll('.cell');
const clickSound = document.getElementById('clickSound');
const winSound = document.getElementById('winSound');
const loseSound = document.getElementById('loseSound');
const drawSound = document.getElementById('drawSound');
const startSound = document.getElementById('startSound');
const newGameSound = document.getElementById('newGameSound');
const levelSelect = document.getElementById('levelSelect');
const scoreDisplay = document.getElementById('score');
const bgColorPicker = document.getElementById('bgColorPicker');

let boardState = Array(9).fill('');
let gameActive = true;
let gold = 0;

// ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù„Ø¹Ø¨Ø©
playSound(startSound);

function playSound(sound){
  sound.currentTime = 0;
  sound.play();
}

function checkWin() {
  const winCombos = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for (let combo of winCombos){
    const [a,b,c] = combo;
    if (boardState[a] && boardState[a]===boardState[b] && boardState[a]===boardState[c]){
      return combo;
    }
  }
  if (!boardState.includes('')) return 'Draw';
  return null;
}

function aiMove(){
  const empty = boardState.map((v,i)=>v===''?i:null).filter(v=>v!==null);
  const level = levelSelect.value;
  let index;

  if(level==='easy'){
    index = empty[Math.floor(Math.random()*empty.length)];
  } else if(level==='medium'){
    index = findWinningMove('O') || empty[Math.floor(Math.random()*empty.length)];
  } else {
    index = findWinningMove('O') || findWinningMove('X') || empty[Math.floor(Math.random()*empty.length)];
  }

  boardState[index]='O';
  cells[index].textContent='O';
  cells[index].classList.add('O');
  playSound(clickSound);
  checkResult();
}

function findWinningMove(player){
  const winCombos = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for (let combo of winCombos){
    const [a,b,c] = combo;
    const values = [boardState[a],boardState[b],boardState[c]];
    if(values.filter(v=>v===player).length===2 && values.includes('')){
      return combo[values.indexOf('')];
    }
  }
  return null;
}

function handleClick(e){
  const index = e.target.dataset.index;
  if(!gameActive || boardState[index]) return;
  boardState[index]='X';
  e.target.textContent='X';
  e.target.classList.add('X');
  playSound(clickSound);
  checkResult();
  if(gameActive) setTimeout(aiMove, 300);
}

function checkResult(){
  const result = checkWin();
  if(result){
    gameActive=false;
    if(result==='Draw'){
      gold += 500;
      playSound(drawSound);
      if(Array.isArray(result)) result.forEach(i => cells[i].classList.add('win'));
    } else {
      const winner = boardState[result[0]];
      if(winner==='X'){
        gold += 1000;
        playSound(winSound);
      } else {
        gold += 0;
        playSound(loseSound);
      }
      result.forEach(i => cells[i].classList.add('win'));
    }
    scoreDisplay.textContent='Ø°Ù‡Ø¨: '+gold;
    setTimeout(resetGame, 1500);
  }
}

function resetGame(){
  boardState.fill('');
  cells.forEach(c=>{c.textContent=''; c.className='cell';});
  gameActive=true;
  playSound(newGameSound);
}

cells.forEach(c=>c.addEventListener('click', handleClick));

bgColorPicker.addEventListener('input', ()=>{
  document.body.style.backgroundColor = bgColorPicker.value;
});
</script>
</body>
</html>
